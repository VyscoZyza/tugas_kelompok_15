{"ast":null,"code":"var _jsxFileName = \"D:\\\\Praktikum\\\\tugas_kelompok_15\\\\src\\\\pages\\\\Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport { Hasil, List, Menus } from \"../components\";\nimport { API_URL } from \"../utils/constants\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\nexport default function Home(props) {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     menus: [],\n  //     categoriYangDipilih: \"Makanan\",\n  //     keranjangs: [],\n  //   };\n  // }\n  const [menus, setMenus] = useState([]);\n  const [categoriYangDipilih, setCategotiYangDipilih] = useState(\"Makanan\");\n  const [keranjangs, setKeranjang] = useState([]);\n  useEffect(() => {\n    axios.get(API_URL + \"products?category.nama=\" + categoriYangDipilih).then(res => {\n      const menus = res.data;\n      this.setState({\n        menus\n      });\n    }).catch(error => {\n      console.log(\"Error yaa \", error);\n    });\n    axios.get(API_URL + \"keranjangs\").then(res => {\n      const keranjangs = res.data;\n      this.setState({\n        keranjangs\n      });\n    }).catch(error => {\n      console.log(\"Error yaa \", error);\n    });\n  }, []);\n  useEffect(prevState => {\n    if (keranjangs !== prevState.keranjangs) {\n      axios.get(API_URL + \"keranjangs\").then(res => {\n        const keranjangs = res.data;\n        this.setState({\n          keranjangs\n        });\n      }).catch(error => {\n        console.log(\"Error yaa \", error);\n      });\n    }\n  }, []);\n\n  const changeCategory = value => {\n    setCategotiYangDipilih(value);\n    setMenus([]);\n    axios.get(API_URL + \"products?category.nama=\" + value).then(res => {\n      const menus = res.data;\n      this.setState({\n        menus\n      });\n    }).catch(error => {\n      console.log(\"Error yaa \", error);\n    });\n  };\n\n  const masukKeranjang = value => {\n    axios.get(API_URL + \"keranjangs?product.id=\" + value.id).then(res => {\n      if (res.data.length === 0) {\n        const keranjang = {\n          jumlah: 1,\n          total_harga: value.harga,\n          product: value\n        };\n        axios.post(API_URL + \"keranjangs\", keranjang).then(res => {\n          swal({\n            title: \"Sukses Masuk Keranjang\",\n            text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\n            icon: \"success\",\n            button: false,\n            timer: 1500\n          });\n        }).catch(error => {\n          console.log(\"Error yaa \", error);\n        });\n      } else {\n        const keranjang = {\n          jumlah: res.data[0].jumlah + 1,\n          total_harga: res.data[0].total_harga + value.harga,\n          product: value\n        };\n        axios.put(API_URL + \"keranjangs/\" + res.data[0].id, keranjang).then(res => {\n          swal({\n            title: \"Sukses Masuk Keranjang\",\n            text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\n            icon: \"success\",\n            button: false,\n            timer: 1500\n          });\n        }).catch(error => {\n          console.log(\"Error yaa \", error);\n        });\n      }\n    }).catch(error => {\n      console.log(\"Error yaa \", error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-n3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    changeCategory: this.changeCategory,\n    categoriYangDipilih: categoriYangDipilih,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, \"Daftar Produk\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    className: \"overflow-auto menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, menus && menus.map(menu => /*#__PURE__*/React.createElement(Menus, {\n    key: menu.id,\n    menu: menu,\n    masukKeranjang: this.masukKeranjang,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(Hasil, Object.assign({\n    keranjangs: keranjangs\n  }, this.props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  })))));\n}","map":{"version":3,"sources":["D:/Praktikum/tugas_kelompok_15/src/pages/Home.js"],"names":["React","useState","useEffect","Row","Col","Container","Hasil","List","Menus","API_URL","axios","swal","Home","props","menus","setMenus","categoriYangDipilih","setCategotiYangDipilih","keranjangs","setKeranjang","get","then","res","data","setState","catch","error","console","log","prevState","changeCategory","value","masukKeranjang","id","length","keranjang","jumlah","total_harga","harga","product","post","title","text","nama","icon","button","timer","put","map","menu"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Row, Col, Container } from \"react-bootstrap\";\r\nimport { Hasil, List, Menus } from \"../components\";\r\nimport { API_URL } from \"../utils/constants\";\r\nimport axios from \"axios\";\r\nimport swal from \"sweetalert\";\r\n\r\nexport default function Home(props) {\r\n  // constructor(props) {\r\n  //   super(props);\r\n\r\n  //   this.state = {\r\n  //     menus: [],\r\n  //     categoriYangDipilih: \"Makanan\",\r\n  //     keranjangs: [],\r\n  //   };\r\n  // }\r\n  const [menus, setMenus] = useState([]);\r\n  const [categoriYangDipilih, setCategotiYangDipilih] = useState(\"Makanan\");\r\n  const [keranjangs, setKeranjang] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(API_URL + \"products?category.nama=\" + categoriYangDipilih)\r\n      .then((res) => {\r\n        const menus = res.data;\r\n        this.setState({ menus });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error yaa \", error);\r\n      });\r\n\r\n    axios\r\n      .get(API_URL + \"keranjangs\")\r\n      .then((res) => {\r\n        const keranjangs = res.data;\r\n        this.setState({ keranjangs });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error yaa \", error);\r\n      });\r\n  }, []);\r\n\r\n  useEffect((prevState) => {\r\n    if (keranjangs !== prevState.keranjangs) {\r\n      axios\r\n        .get(API_URL + \"keranjangs\")\r\n        .then((res) => {\r\n          const keranjangs = res.data;\r\n          this.setState({ keranjangs });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error yaa \", error);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const changeCategory = (value) => {\r\n    setCategotiYangDipilih(value);\r\n    setMenus([]);\r\n\r\n    axios\r\n      .get(API_URL + \"products?category.nama=\" + value)\r\n      .then((res) => {\r\n        const menus = res.data;\r\n        this.setState({ menus });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error yaa \", error);\r\n      });\r\n  };\r\n\r\n  const masukKeranjang = (value) => {\r\n    axios\r\n      .get(API_URL + \"keranjangs?product.id=\" + value.id)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          const keranjang = {\r\n            jumlah: 1,\r\n            total_harga: value.harga,\r\n            product: value,\r\n          };\r\n\r\n          axios\r\n            .post(API_URL + \"keranjangs\", keranjang)\r\n            .then((res) => {\r\n              swal({\r\n                title: \"Sukses Masuk Keranjang\",\r\n                text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\r\n                icon: \"success\",\r\n                button: false,\r\n                timer: 1500,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error yaa \", error);\r\n            });\r\n        } else {\r\n          const keranjang = {\r\n            jumlah: res.data[0].jumlah + 1,\r\n            total_harga: res.data[0].total_harga + value.harga,\r\n            product: value,\r\n          };\r\n\r\n          axios\r\n            .put(API_URL + \"keranjangs/\" + res.data[0].id, keranjang)\r\n            .then((res) => {\r\n              swal({\r\n                title: \"Sukses Masuk Keranjang\",\r\n                text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\r\n                icon: \"success\",\r\n                button: false,\r\n                timer: 1500,\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error yaa \", error);\r\n            });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error yaa \", error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container fluid>\r\n        <Row>\r\n          <Col className=\"ml-4\">\r\n            <div className=\"ml-n3\">\r\n              <List\r\n                changeCategory={this.changeCategory}\r\n                categoriYangDipilih={categoriYangDipilih}\r\n              />\r\n            </div>\r\n            <h4 className=\"mt-3\">\r\n              <strong>Daftar Produk</strong>\r\n            </h4>\r\n            <hr />\r\n            <Row className=\"overflow-auto menu\">\r\n              {menus &&\r\n                menus.map((menu) => (\r\n                  <Menus\r\n                    key={menu.id}\r\n                    menu={menu}\r\n                    masukKeranjang={this.masukKeranjang}\r\n                  />\r\n                ))}\r\n            </Row>\r\n          </Col>\r\n          <Hasil keranjangs={keranjangs} {...this.props} />\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}